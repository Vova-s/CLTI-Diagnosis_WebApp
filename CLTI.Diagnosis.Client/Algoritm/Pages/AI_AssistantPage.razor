@page "/Pages/AssistantPage"
@rendermode InteractiveServer

@using CLTI.Diagnosis.Client.Components
@using CLTI.Diagnosis.Client.Shared

<div class="page-container">
    <NavMenuHome />
    <div class="frame-parent">
        <div class="frame-parent-message">
            @foreach (var message in Messages)
            {
                <AI_Message Text="@message.Text" Role="@message.Role" />
            }

        </div>

        <div class="message-input-wrapper">
            <input class="message-input"
                   placeholder="Напишіть ваше запитання про CLTI діагностику..."
                   @bind="MessageText"
                   @bind:event="oninput"
                   @onkeydown="OnKeyDown"
                   disabled="@IsLoading" />
            <button class="send-button"
                    @onclick="SendMessage"
                    disabled="@(IsLoading || string.IsNullOrWhiteSpace(MessageText))">
                @if (IsLoading)
                {
                    <div class="loading-spinner-button"></div>
                }
                else
                {
                    <img class="frame-icon" alt="Send Icon" src="Photo/SendIcon.svg" />
                }
            </button>
        </div>
    </div>
</div>

<style>

</style>